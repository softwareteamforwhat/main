# 用例文档V3.0.1
* 最后一次更新时间：2019/6/13
* 更新人：殷承鉴，呼斯楞，汪良川，江宗霖
## 1. 引言
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;JOJO-Why小组对电影院管理系统作的需求分析，参考了老师和助教提供的需求文档，为开发电影院管理系统作准备工作。
## 2. 用例图
![用例图](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/UserCaseDiagram.jpg)
## 3. 用例列表
* 登录
* 注册
* 上架电影
* 统计电影的想看人数
* 查看电影列表
* 查看电影详情
* 标记某电影为想看
* 搜索电影
* 添加排片信息
* 设置排片信息观众可见时间
* 修改排片信息观众可见时间
* 删除排片信息
* 修改排片信息
* 查看统计数据
* 发布优惠活动
* 购买电影票
* 购买会员卡
* 查看会员卡
* 充值会员卡
* 下架电影
* 修改电影
* 查看电影票
* 发布会员卡
* 修改会员卡优惠策略
* 新增退票策略
* 修改退票策略
* 影厅信息录入
* 修改影厅信息
* 影院角色的增删改查
* 用户退票
* 查看历史充值
* 查看历史消费记录
* 赠送优惠券
## 4. 详细用例描述
### 4.1 登录

| ID | 0001 |
| :--------: | ------------------|
| 名称 | 登录 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 普通用户、影院员工、经理、管理员（以下统称用户） |
| 触发条件 | 输入用户名和密码，点击登录按钮 |
| 前置条件 | 无 |
| 后置条件 | 跳转到登录后的界面 |
| 优先级 | 高 |
| 介绍     | 用户通过登录进入系统。                            |
| 正常流程 | 1.用户输入用户名和密码；如果登录者是普通用户，则系统跳转至用户首页界面；如果登录者是管理员，则系统跳转至管理员首页界面；如果登录者是影院员工，则系统跳转至影院员工首页界面；如果登录者是经理，则系统跳转至经理首页界面。 |
| 扩展流程 | 1a. 用户输入的用户名不存在:系统提示用户名不存在，并返回正常流程1。<br> 1b.用户输入用户名存在但密码错误:系统提示密码错误，并返回正常流程1。 |
| 特殊需求 | 无 |

### 4.2注册
| ID | 0002 |
| :--------: | ------|
| 名称 | 注册 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 普通用户 |
| 触发条件 | 点击注册按钮 |
| 前置条件 | 无 |
| 后置条件 | 跳转到注册后的界面 |
| 优先级 | 高 |
| 介绍     | 普通用户通过注册拥有登录系统的凭证。                         |
| 正常流程 | 1. 用户输入用户名、密码、以及第二次输入密码；2. 系统保存用户信息并提示注册成功。 |
| 扩展流程 | 1a. 用户输入的用户名或密码为空:系统提示用户输入为空，并返回正常流程1。<br>1b. 用户输入的用户名已存在:系统提示用户名已存在，并返回正常流程1。<br>1c. 用户输入的两次密码不一致:系统提示用户输入的密码不一致，并返回正常流程1。<br> |
| 特殊需求 | 只允许注册成为普通用户，即管理员不需要注册，应该预留管理员的账号在系统中。 |

### 4.3上架电影
| ID | 0003 |
| :---------: | ------|
| 名称 | 上架电影 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员|
| 触发条件 | 点击上架按钮 |
| 前置条件 | 无 |
| 后置条件 | 跳转到电影列表 |
| 优先级 | 高 |
| 介绍     | 管理员可以上架电影，设置电影详情，从而让观众可以提前了解电影详情。 |
| 正常流程 | 1. 管理员输入上架电影的详情，包括：名称、电影宣传海报、导演、编剧、主演、类型、制片国家/地区、语言、上映日期、片长和下映日期<br>2. 系统保存电影详情。<br> |
| 扩展流程 | 1a. 用户输入信息存在空值:系统提示用户输入存在空值，并返回正常流程1<br>1b. 用户输入的上映日期在系统时间之前:系统提示上映日期输入有误。<br>1c. 用户输入的下映日期在上映日期之前:系统提示下映日期输入有误。<br> |
| 特殊需求 | 上架电影上架的是仍未上映的电影，此时电影仍是预售状态，普通用户不可以针对未上映的电影购票，但普通用户可以标记其为“想看”。当系统时间到达管理员设置的上映日期后，电影自动变为可售票状态，即此时普通用户可以对该电影购票。 |

### 4.4统计电影的想看人数
| ID | 0004 |
| :---------: | ------|
| 名称 | 统计电影的想看人数 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员 |
| 触发条件 | 进入电影详情 |
| 前置条件 | 无 |
| 后置条件 | 显示折线图 |
| 优先级 | 高 |
| 介绍     | 系统以图表的形式帮助管理员了解电影的想看人数，包括所有电影想看人数的对比，以及单个电影每日想看人数的变化，从而能够让管理员了解电影的流行度。 |
| 正常流程 | 1. 管理员选择查看所有电影的想看人数<br>2. 系统以柱状图的形式显示所有电影截止到当前系统时间为止的想看人数<br>3. 管理员选择点击的一部电影<br>4. 系统以折线图的形式显示该电影自发布时间到当前日期为止每天想看人数的变化趋势，即纵坐标为“想看人数”，横坐标为“日期”。 |
| 扩展流程 | 无 |
| 特殊需求 | 无 |

### 4.5查看电影列表
| ID | 0005 |
| :---------: | ------|
| 名称 | 查看电影列表 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 |观众、影院员工 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 显示电影列表 |
| 优先级 | 高 |
| 正常流程 | 1. 观众选择查看已上架电影<br>2. 系统显示电影列表，包括名称、电影宣传海报、主演、上映日期等简单资料 <br>|
| 扩展流程 | 无 |
| 特殊需求 | 无 |

### 4.6查看电影详情
| ID | 0006 |
| :---------: | ------|
| 名称 |查看电影详情  |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众、影院员工 |
| 触发条件 | 点击详情 |
| 前置条件 | 无 |
| 后置条件 | 进入电影详情页 |
| 优先级 | 高 |
| 正常流程 | 1. 观众选择一部电影查看详情<br>2. 系统显示电影的详细资料，包括名称、电影宣传海报、导演、编剧、主演、类型、制片国家/地区、语言、上映日期、片长<br>|
| 扩展流程 | 无|
| 特殊需求 | 无|

### 4.7标记某电影为想看
| ID | 0007 |
| :---------: | ------|
| 名称 | 标记某电影为想看 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 点击想看按钮|
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 观众选择一部电影查看详情，并标记想看<br>2. 系统显示已标记，并修改状态为想看<br> |
| 扩展流程 | 1a. 观众选择一部电影查看详情，若已是想看状态，再次点击：系统显示已取消标记，并取消用户想看状态<br>1b. 观众在电影列表中选择一部电影点击想看：系统显示已标记，并修改状态为想看<br> |
| 特殊需求 | 无                                                          |

### 4.8搜索电影
| ID | 0008 |
| :---------: | ------|
| 名称 | 搜索电影 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 点击搜索 |
| 前置条件 | 搜索框有输入 |
| 后置条件 | 展示搜索结果 |
| 优先级 | 高 |
| 正常流程 | 1. 观众输入关键字<br>2. 系统显示名称和主演以及介绍中含有关键字的电影列表，每项包括名称，上映日期，主演、电影宣传海报<br> |
| 扩展流程 | 2a. 若无搜索结果，则提示暂无结果<br> 2b. 用户输入为空，则不进行搜索<br> |
| 特殊需求 | 无|

### 4.9添加排片信息
| ID | 0009 |
| :---------: | ------|
| 名称 | 添加排片信息 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击添加排片信息按钮 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求添加排片信息<br>2. 系统提示用户选择日期和影厅<br>3. 用户选择日期和影厅并确认<br>4. 系统展示该日期下该影厅可供排片的时间段和影片列表5. 用户选择时间段和影片，并填写票价后确认6. 系统提示添加成功<br> |
| 扩展流程 | 5a. 用户选择的时间段与已经排片的其他影片放映时间段冲突<br>1. 系统提示时间冲突，请用户重新选择，返回正常流程第5步<br> |
| 特殊需求 |无|

 

### 4.10查看排片信息
| ID | 0010 |
| :---------: | ------|
| 名称 |查看排片信息  |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工、观众 |
| 触发条件 | 点击查看排片信息 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求查看排片信息<br>2. 系统提示用户选择日期、影厅及视角<br>3. 用户选择日期、影厅和视角并确认<br>4. 系统根据用户的选择，按照所选视角展示该日期和影厅的排片信息表<br> |
| 扩展流程 |                                                            |  | 特殊需求 | 3a. 选择日期时（默认当天），可以选择日期区间或具体日期，选择影厅时（默认全部），可以选择全部影厅或某具体影厅。如：选择2019-04-01到2019-04-08区间全部影厅的排片信息<br>3b. 视角分为影厅和电影。视角为影厅时，展示每个影厅自身的排片情况，视角为电影时，展示该电影在各影厅的排片情况。<br>4a. 排片信息表字段定义：影厅名，影片名，放映开始时间，放映结束时间，票价 |
| 特殊需求 | 无     |

### 4.11设置排片信息观众可见时间
| ID | 0011|
| :---------: | ------|
| 名称 | 设置排片信息观众可见时间 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击设置时间|
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求设置某日期或日期区间排片信息对观众可见时间<br>2. 系统提示用户输入可见时间<br>3. 用户输入并确认<br>4. 系统提示设置成功 <br>|
| 扩展流程 | 4a. 用户输入时间晚于排片日期<br>1. 系统提示输入错误，返回正常流程第2步 <br>|                                     |
| 特殊需求 | 无                                                          |

### 4.12修改排片信息观众可见时间
| ID | 0012 |
| :---------: | ------|
| 名称 |  修改排片信息观众可见时间|
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击修改|
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求修改某日期或日期区间排片信息对观众可见时间<br>2. 系统提示用户输入可见时间<br>3. 用户输入并确认<br>4. 系统提示修改成功<br> |
| 扩展流程 | 4a. 用户输入时间晚于排片日期<br>1. 系统提示错误，返回正常流程第2步<br> |
| 特殊需求 | 无                                        |

### 4.13删除排片信息
| ID | 0013 |
| :---------: | ------|
| 名称 | 删除排片信息 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击删除 |
| 前置条件 | 无 |
| 后置条件 | 更改排片表 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求删除排片信息<br>2. 系统提示用户选择日期和影厅<br>3. 用户选择日期和影厅并确认<br>4. 系统展示该日期下该影厅的已排片信息<br>5. 用户选择删除某时间段的排片信息<br>6. 系统询问用户是否确认删除<br>7. 用户确认<br>8. 系统提示删除成功 |
| 扩展流程 | 2a. 当前时间不早于排片信息对观众可见时间<br>1. 系统提示无法删除7a. 用户选择取消<br>1. 系统返回正常流程第4步<br> |
| 特殊需求 |             无                     |

 

### 4.14修改排片信息
| ID | 0014 |
| :---------: | ------|
| 名称 | 修改排片信息 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击修改 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求修改排片信息<br>2. 系统提示用户选择日期和影厅<br>3. 用户选择日期和影厅并确认<br>4. 系统展示该日期下该影厅的已排片信息<br>5. 用户选择修改某时间段排片<br>6. 系统提示修改成功 |
| 扩展流程 | 2a. 当前时间不早于排片信息对观众可见时间<br>2. 系统提示观众已可见无法修改<br>5a. 用户选择修改该排片的放映时间段<br>1. 系统提示用户重新选择时间段<br>2. 用户选择并确认<br>2a. 用户选择的时间段与已经排片的其他影片放映时间段冲突<br>1. 系统提示时间冲突，返回扩展流程第5a.1步       <br> 2b. 用户选择的时间段小于当前影片放映时长<br>1. 系统提示时间段不得小于影片时长，返回扩展流程第5a.1步<br>5b. 用户选择修改该排片的放映影片<br>1. 系统展示所有可供排片的影片信息2. 用户选择影片并确认<br>2a. 用户选择的影片放映时长大于当前时间段<br>1. 系统提示时间段不得小于影片时长，返回扩展流程第5b.2步 |
| 特殊需求 |                   无                                        |
### 4.15查看统计数据
| ID | 0015 |
| :---------: | ------|
| 名称 | 查看统计数据 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求查看统计数据<br>2. 系统提示用户选择想查看的统计数据<br>3. 用户选择想查看的统计数据并确认<br>4. 系统展示该项统计数据<br> |
| 扩展流程 |                 无                  |
| 特殊需求 | 可选的统计数据：近期最受欢迎电影（票房越高越受欢迎）,上座率（当日某影片上座率=当日该影片观影人数/∑【当日每场电影放映场次*每场所在影厅的座位数】），客单价（观众购票所花总金额/购票次数），票房（当日某影片票房=∑【当日该影片每场观影人数*当日该场票价】），排片率（当日某影片排片率=当日该影片放映场数/当日所有电影的总放映场数） |

### 4.16发布优惠活动
| ID | 0016 |
| :---------: | ------|
| 名称 | 发布优惠活动 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击发布 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求发布优惠活动<br>2. 系统提示输入活动进行时间区间，优惠券的使用有效期，优惠金额及参与条件<br>3. 用户输入活动进行时间区间，优惠券使用有效期，优惠金额，参与条件并确认<br>4. 系统提示优惠活动发布成功<br> |
| 扩展流程 |无|
| 特殊需求 | 参与条件有两个选项一个是活动期间进行过购票行为，另一个是购买指定电影优惠活动发布成功后，在活动进行时间进行过购票行为或指定电影的观众可以获得优惠券 |

### 4.17购买电影票
| ID | 0017 |
| :---------: | ------|
| 名称 | 购买电影票 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 点击购买 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1.系统显示影院的某一电影场次信息，包括起始时间、价格、影厅、版本（原版/国语；2D/3D）<br>2.用户点击某一场次的选座购票<br>3.系统显示选座界面，用户进行选座，勾选目标座位<br>4.用户点击确认选座，进入订单确认界面，系统自动选择最优惠策略<br>5.系统显示订单信息，包括价格、座位信息、时间信息、影片信息等<br>6.用户确认订单用户<br>7.选择支付方式（第三方或者会员卡支付），支付订单<br>8.如果选择第三方支付，系统跳转第三方界面；如果选择会员卡支付，系统跳转会员卡支付界面<br>9.用户输入密码，支付成功<br> |
| 扩展流程 | 6a. 用户取消订单 <br> a. 解锁座位信息，退回至选座阶段<br>9a. 用户选择稍后支付或支付时异常退出 <br> a. 订单保留待支付状态15分钟<br>  b. 超时未支付则自动取消订单<br> |
| 特殊需求 | 进入确认订单流程后座位即被锁定                               |
### 4.18购买会员卡
| ID | 0018 |
| :---------: | ------|
| 名称 | 购买会员卡 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 点击购买 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户点击购买会员卡<br>2. 系统显示会员卡特权信息，包括价格、充值优惠信息等<br>3. 用户点击购买<br>4. 系统进入订单确认界面<br>5. 用户确认订单，系统跳转第三方支付界面<br>6. 用户输入密码，确认支付后系统显示更新后的会员卡信息<br>|
| 扩展流程 | 5a. 用户取消订单<br> a. 系统返回正常流程2<br>6a. 用户选择稍后支付或支付时异常退出<br>  a. 订单保留待支付状态15分钟<br>  b. 超时未支付则自动取消订单<br> |
| 特殊需求 |无|


### 4.19查看会员卡
| ID | 0019 |
| :---------: | ------|
| 名称 | 查看会员卡 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 观众进入会员卡界面 |
| 前置条件 | 有会员卡 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户查看会员卡<br>2. 系统显示该用户的会员信息，包括会员卡余额等<br> |
| 扩展流程 | 无                                                           |
| 特殊需求 | 无                                                           |

### 4.20充值会员卡
| ID | 0020 |
| :---------: | ------|
| 名称 |  |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 普通用户 |
| 触发条件 | 点击充值 |
| 前置条件 | 存在会员卡 |
| 后置条件 | 更改会员卡余额 |
| 优先级 | 高 |
| 正常流程 | 1. 系统显示会员卡信息<br>2. 用户点击充值<br>3. 系统显示充值金额选择界面<br>4. 用户点击充值金额或输入充值金额<br>5. 系统显示订单信息，包括充值金额、支付金额等信息<br>6. 用户确认订单，进行支付<br>7. 系统跳转第三方支付界面<br>8. 用户输入密码，完成支付；系统显示更新后的会员卡信息 <br>|
| 扩展流程 | 6a. 用户取消订单 <br>a. 系统返回正常流程1<br>8a. 用户选择稍后支付或支付时异常退出 <br> a. 订单保留待支付状态15分钟 <br> b. 超时未支付则自动取消订单 |
| 特殊需求 | 无                   |

### 4.21下架电影
| ID | 0021 |
| :---------: | ------|
| 名称 | 下架电影 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 点击下架 |
| 前置条件 | 电影已经上架|
| 后置条件 | 修改电影列表 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求下架电影<br>2. 系统提示用户选择需要下架的电影<br>3. 用户选择需要下架的电影并确认<br>4. 系统提示下架成功 <br>|
| 扩展流程 | 3a. 用户选择要下架的电影已有观众买票还没观看或后续还有排片的<br>    1.系统提示无法下架 <br>|
| 特殊需求 |无|


### 4.22修改电影
| ID | 0022 |
| :---------: | ------|
| 名称 | 修改电影 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 影院员工 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1. 用户请求修改电影信息<br>2. 系统提示用户选择需要修改的电影并填写修改信息<br>3. 用户选择要修改的电影填写修改信息完毕后确认<br>4. 系统提示修改成功<br> |
| 扩展流程 | 3a. 用户选择要修改的电影已有观众买票还没观看或后续还有排片的<br>    1.系统提示无法修改<br> |
| 特殊需求 |无|

### 4.23查看电影票
| ID | 0023 |
| :---------: | ------|
| 名称 | 查看电影票 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 普通用户 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 用户点击查看自己购买的电影票系统显示用户已购的电影票列表，每张电影票内容包括：电影名、电影开始时间、影厅名称、结束时间、票价、座位号（排号和列号），付款状态 （支付成功和未成功） |
| 扩展流程 | 6. 用户没有已购电影票<br> a. 系统提示还没有购买任何电影票<br>  | | 特殊需求 | 进入确认订单流程后退出界面或付款不成功即为未成功状态         |

### 4.24发布会员卡优惠策略
| ID | 0024|
| :---------: | ------|
| 名称 | 发布会员卡 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/6/13 |
| 更新者 | 呼斯楞 |
| 参与者 |管理员、经理 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1.管理员/经理选择发布会员卡充值优惠策略2.管理员/经理输入会员卡优惠策略（满x赠y） |
| 扩展流程 |          无                    |
| 特殊需求 | 会员卡：会员卡可用于购票，享有优惠 |

### 4.25修改/删除会员卡优惠策略
| ID | 0025 |
| :---------: | ------|
| 名称 | 修改/删除会员卡优惠策略 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/6/13 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员、经理 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1.管理员/经理选择修改/删除已发行的会员卡优惠策略2.如果是修改，输入新的优惠信息（满x赠y） |
| 扩展流程 |               无                                    |
| 特殊需求 |                 无                                   |

### 4.26新增退票策略
| ID | 0026 |
| :---------: | ------|
| 名称 |新增退票策略 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员，经理，影院员工 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 添加用户退票的策略，当用户发起退票时根据策略来处理（包括能否退票以及价格折算等） |
| 扩展流程 |无|
| 特殊需求 |无|

 

### 4.27修改退票策略
| ID | 0027 |
| :---------: | ------|
| 名称 | 修改退票策略 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 修改现有的退票策略                             |
| 扩展流程 |                无                                |
| 特殊需求 | 需要考虑有用户正在退票时，修改策略对用户的影响 |

 

### 4.28影厅信息录入
| ID | 0028 |
| :---------: | ------|
| 名称 | 影厅信息录入 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 录入影院的影厅信息（名称、座位信息、大/中/小等） |
| 扩展流程 |                  无                                |
| 特殊需求 |                    无                              |

 

### 4.29修改影厅信息
| ID | 0029 |
| :---------: | ------|
| 名称 | 修改影厅信息 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 选择需要修改的影厅，录入影厅新的信息                         |
| 扩展流程 |无|
| 特殊需求 | 正在使用中的影厅不推荐可修改信息，会影响已发售的影票和排片等 |

 

### 4.30影院角色的增删改查
| ID | 0030 |
| :---------: | ------|
| 名称 | 影院角色的增删改查 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 管理影院员工（售票员）、经理（管理员）等账号信息 |
| 扩展流程 |                        无                          |
| 特殊需求 |                          无                        |


### 4.31用户退票
| ID | 0031 |
| :---------: | ------|
| 名称 | 用户退票 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程     | 当订单已支付并未出票时，用户可以在线退票 |
| 扩展流程     |                  无          |
| 特殊需求     | 退票具体逻辑需要根据退票策略来决定       |

 

### 4.32查看历史充值
| ID | 0032 |
| :---------: | ------|
| 名称 | 查看历史充值 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/6/13 |
| 更新者 | 呼斯楞 |
| 参与者 | 普通用户 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1.用户查看充值记录2.系统展示用户充值记录3.用户选择某一项充值记录查看详情 |
| 扩展流程 |无|
| 特殊需求 |无|

### 4.33查看历史消费记录
| ID | 0033 |
| :---------: | ------|
| 名称 | 查看历史消费记录 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/4/21 |
| 更新者 | 呼斯楞 |
| 参与者 | 观众 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 用户查看消费记录系统展示用户消费记录用户选择某一项消费记录查看详情 |
| 扩展流程 |无|
| 特殊需求 |无|


### 4.34赠送优惠劵
| ID | 0034 |
| :---------: | ------|
| 名称 | 赠送优惠券 |
| 创建时间 | 2019/3/17 |
| 创建者 | 呼斯楞 |
| 更新时间 | 2019/6/13 |
| 更新者 | 呼斯楞 |
| 参与者 | 管理员/经理 |
| 触发条件 | 无 |
| 前置条件 | 无 |
| 后置条件 | 无 |
| 优先级 | 高 |
| 正常流程 | 1.管理员输入要赠送优惠券的会员的已消费金额2.管理员点击赠送3.显示要赠送的人数4.管理员选择赠送的优惠券5.赠送成功，弹出提示框 |
| 扩展流程 |5a.赠送失败，弹出提示框。|
| 特殊需求 |无|

 

## 5.需求分析模型

### 5.1 系统顺序图
![系统顺序图](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E4%BF%AE%E6%94%B9%E6%8E%92%E7%89%87.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E4%BF%AE%E6%94%B9%E6%97%B6%E9%97%B4.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E5%88%A0%E9%99%A4%E6%8E%92%E7%89%87.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E6%97%B6%E9%97%B4%E7%8A%B6%E6%80%81%E5%9B%BE.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E6%9F%A5%E7%9C%8B%E6%8E%92%E7%89%87.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E6%B7%BB%E5%8A%A0%E6%8E%92%E7%89%87.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E7%B3%BB%E7%BB%9F%E9%A1%BA%E5%BA%8F%E5%9B%BE%E5%AF%B9%E4%BA%8E%E8%B4%AD%E4%B9%B0%EF%BC%8C%E4%BC%9A%E5%91%98%EF%BC%8C%E4%BC%98%E6%83%A0.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E8%AE%BE%E7%BD%AE%E6%97%B6%E9%97%B4.jpg)

![](https://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/promotion.jpg)

![](https://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/vipCharge2.jpg)

### 5.2 概念类图
![概念类图](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E6%A6%82%E5%BF%B5%E7%B1%BB%E5%9B%BE%E5%AF%B9%E4%BA%8E%E8%B4%AD%E4%B9%B0%EF%BC%8C%E4%BC%9A%E5%91%98%EF%BC%8C%E4%BC%98%E6%83%A0.jpg)

### 5.3 状态图
![状态图](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E7%8A%B6%E6%80%81%E5%9B%BE%20%281%29.jpg)
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/%E7%8A%B6%E6%80%81%E5%9B%BE%E5%AF%B9%E4%BA%8E%E8%B4%AD%E7%A5%A8%EF%BC%8C%E4%BC%9A%E5%91%98%EF%BC%8C%E4%BC%98%E6%83%A0.jpg)

![](https://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/promotion2.jpg)

![](https://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/%E7%94%A8%E4%BE%8B%E6%96%87%E6%A1%A33.0/vipCharge.jpg)