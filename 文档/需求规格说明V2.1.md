# 电影院管理系统需求规格说明V2.1
* 最后一次更新时间：2019/6/19
* 更新人：江宗霖
## 1. 引言
### 1.1 目的
* 本文档描述了电影院管理系统的功能需求和非功能需求，开发小组的软件系统实现与验证工作都以此文档为依据。
* 按照刘钦老师的要求，本文档只在上次更新的基础上增加了第三阶段的功能。
* 除特殊说明外，本文档所包含的需求都是高优先级需求。
### 1.2 范围
电影院管理系统是为了实现电影院管理（作为软件工程二大作业）开发的业务系统。
### 1.3 参考文献
1）IEEE标准<br>
2）电影院管理系统用例文档

## 2. 总体描述
### 2.1 项目前景
#### 2.1.1 背景与机遇

　　电影院存在人力资源消耗过大，人力成本过高的问题，对信息化技术的应用能够有效地解决这个问题，我们软件学院为了锻炼学生能力，在大作业中以影院管理系统为课题，做一个1-2万行代码的项目。也借此掌握理解软工二课程内容。<br>
　　这个项目旨在通过软件管理降低电影院工作的人力成本。管理员通过系统更好的管理电影，让观众获得更好的购票观影体验。

#### 2.1.2 业务需求
* BR1：系统使用3个月后，管理人员工作效率提高50%
* BR2：系统使用6个月后，运营成本降低15%
    * 范围：人力成本
    * 度量：检查平均员工数量
* BR3：系统使用6个月后，销售额度提高20%
    最好情况：40%
    最可能情况：20%
    最坏情况：10%

### 2.2 项目功能
* PF1：根据市场变化调整上架的电影
* PF2：允许管理员调整员工信息，进行职位变动与授权
* PF3: 制定和管理会员卡的充值优惠策略
* PF4: 制定和管理退票策略
* PF5: 调整影厅的相关信息
* PF5: 允许消费者查看自己的银行卡消费记录，会员卡使用记录，历史订单，并进行订单退款操作

### 2.3 用户特征

|  |  |
| ----| :---|
| 影院员工 | 影院管理系统有多个员工，他们完成电影管理，会员卡充值策略管理，退票策略管理，影厅管理，观众管理等任务 |
|影院经理|系统中存在多个影院经理，影院经理除了拥有所有影院员工的权限外，还可以对员工进行管理|
|管理员|系统中仅仅存在一个管理员，管理员除拥有影院经理的所有权限外，还可以对影院经理进行管理|
| 观众 | 观众希望通过该系统更方便的了解电影信息并且购票观看电影 |

### 2.4 约束
* CON1：系统使用web界面。
* CON2：系统将运行在win10系统上。
* CON3：项目使用持续集成方法进行开发。
* CON4：在开发中，开发者要提交软件需求规格说明文档、设计描述文档和测试报告。
### 2.5 假设与依赖
* AE1：假设不会有2个及以上影院员工或影院经理或管理员一起使用系统。
## 3 详细需求描述
### 3.1 对外接口需求
#### 3.1.1 用户界面 (todo，需要把如下图补充完整)

UI1上架电影：影院管理员选择电影上架。见下图：
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/public.jpg)

UI2搜索电影：观众在输入框中输入信息，搜索电影。如下图：
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/search.png)

UI3查看电影详细信息：观众选择电影，并查看信息。如下图：
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/detail.jpg)

UI4标记想看：观众选中电影，标记为想看。如下图：
![](http://image-of-hsl.oss-cn-shenzhen.aliyuncs.com/like.jpg)

UT5:会员卡充值策略管理：具有权限的用户可以对会员卡充值策略进行管理。如下图：
![会员卡充值策略管理]()

UT6:退票策略管理：具有权限的用户可以对退票策略进行管理。如下图：
![退票策略管理]()

UT7:影厅信息管理：具有权限的用户可以对影厅信息进行管理。如下图：
![影厅信息管理]()

UT8:用户管理：具有权限的用户可以对用户进行管理。如下图：
![用户管理]()

UT9:查看历史订单：观众可以查看历史订单。如下图：
![查看历史订单]()


UT10:查看银行卡消费记录：观众可以查看银行卡消费记录。如下图：
![查看银行卡消费记录]()

UT11:查看会员卡使用记录：观众可以查看会员卡使用记录。如下图：
![查看会员卡使用记录]()

UT12:赠送优惠券：影院员工，经理，管理员可以选择消费金额达到条件的用户对其赠送优惠券。如下图：
![赠送优惠券]()


#### 3.1.2 通信接口
CI：客户端与服务器使用RMI的方式进行通信。
###   3.2 功能需求
####  3.2.1  上架电影
##### 3.2.1.1 特性描述
* 得到授权的管理员开始处理电影上架，完成上架。
* 优先级=高

##### 3.2.1.2 刺激/响应序列
* 刺激：管理员点击新建
* 响应：系统提示输入信息
* 刺激：管理员输入电影信息
* 响应：系统显示输入的信息
* 刺激：管理员点击完成
* 响应：系统更新上架电影列表
##### 3.2.1.3 相关功能需求

|                   |                                                              |
| ----------------- | ------------------------------------------------------------ |
| put.add           | 管理员点击新建后，系统提示输入信息 |
| put.input         | 系统应该允许管理员输入电影信息 |
| put.input.invalid | 1.电影已经存在于已上架电影列表中，提示电影已上架<br>                                                   2. 输入信息为空，提示输入错误 |
| put.input.complite  | 在管理员点击完成命令后，系统显示更新后的上架电影列表 |
| put.input.cancel  | 在管理员点击取消命令后，系统关闭当前的上架任务 |

####  3.2.2 搜索电影
##### 3.2.2.1 特性描述
* 观众搜索电影，系统显示相应的结果
* 优先级=高
##### 3.2.2.2 刺激/响应序列
* 刺激：观众输入电影关键字（名称或日期）
* 响应：系统显示输入的内容
* 刺激：观众点击搜索
* 响应：系统显示搜索结果
##### 3.2.2.3 相关功能需求

|                      |                                                      |
| -------------------- | ---------------------------------------------------- |
| Search.input         | 系统应该允许观众在搜索任务中进行键盘输入             |
| Search.input.end     | 观众结束输入，系统开始搜索                          |
| Search.input.show    | 系统显示搜索结果                                   |
| Search.input.unfound | 如果输入的内容找不到匹配结果，系统显示搜索结果不存在  |

####  3.2.3 查看电影详细信息
##### 3.2.3.1 特性描述
* 观众查看电影详细信息，系统显示电影详细信息
* 优先级=高
##### 3.2.3.2 刺激/响应序列
* 刺激：观众点击详情
* 响应：系统显示电影详细信息
##### 3.2.3.3 相关功能需求

|              |                                          |
| ------------ | ---------------------------------------- |
| Learn.show | 用户点击详情，系统显示电影详情   |

####  3.2.4 标记想看
##### 3.2.4.1 特性描述
已登录观众将某预售电影标记位想看，系统显示已标记，并且更新收藏夹。
##### 3.2.4.2 刺激/响应序列
* 刺激：观众点击想看
* 响应：系统显示已经标记并且更新观众收藏夹
##### 3.2.4.4 相关功能需求

|                        |                                                          |
| ---------------------- | -------------------------------------------------------- |
| sign.favourite         | 系统应该给每个观众提供一个收藏夹                         |
| sign.favourite.refresh | 观众标记电影为想看之后更新收藏夹                         |
| sign.like              | 系统应该在电影列表页面和电影详情界面提供“添加想看”的功能 |
| sign.change            | 系统更新想看人数 |

####  3.2.5 增加和修改会员卡充值策略
##### 3.2.5.1 特性描述
* 管理员/经理修改会员卡优惠策略
* 优先级=高
##### 3.2.5.2 刺激/响应序列
* 刺激：观众点击新增/修改
* 响应：系统显示新增/修改页面
* 刺激：观众输入信息
* 响应：系统显示输入的信息
* 刺激：观众点击完成
* 响应：系统更新优惠策略列表
##### 3.2.5.3 相关功能需求

|              |                                          |
| ------------ | ---------------------------------------- |
| vipStrategy.show | 管理员/经理点击会员管理，系统显示优惠策略列表 |
| vipStrategy.add | 管理员/经理点击增加优惠策略，系统弹出新增页面 |
| vipStrategy.change | 管理员/经理点击修改优惠策略，系统弹出修改页面 |
| vipStrategy.input | 系统允许管理员/经理在新增/修改优惠策略任务中进行键盘输入 |
| vipStrategy.input.Del | 系统允许管理员/经理删除输入的信息 |
| vipStrategy.input.Cancle | 系统允许管理员/经理取消输入命令 |
####  3.2.6 删除会员卡优惠策略
##### 3.2.6.1 特性描述

- 管理员/经理删除会员卡优惠策略
- 优先级=高
##### 3.2.6.2 刺激/响应序列

- 刺激：观众点击删除
- 响应：系统删除优惠策略
##### 3.2.6.3 相关功能需求
|                    |                                                     |
| ------------------ | --------------------------------------------------- |
| vipStrategy.show   | 管理员/经理点击会员管理，系统显示优惠策略列表       |
| vipStrategy.remove | 管理员/经理选择优惠策略点击删除按钮，系统删除该策略 |

####  3.2.7 退票策略的管理

##### 3.2.7.1 特性描述

- 已经被识别以及授权的影院管理员对退票策略进行 新增/修改/删除 ，完成退票策略的 新增/修改/删除。
- 优先级=高

##### 3.2.7.2 刺激/响应序列

- 刺激：影院管理员选择 新增/修改/删除 退票策略

- 响应：系统显示对应退票策略的各个信息输入窗口

- 刺激：影院管理员填写退票策略信息并且提交

- 响应：系统修改退票策略并且显示 新增/修改/删除 退票策略成功信息

##### 3.2.7.3 相关功能需求

|                             |                                                          |
| :-------------------------: | :------------------------------------------------------: |
|     RefundStrategy.show     |      管理员/经理点击退票策略，系统显示退票策略列表       |
|     RefundStrategy.add      |      管理员/经理点击增加退票策略，系统弹出新增页面       |
|    RefundStrategy.change    |      管理员/经理点击修改退票策略，系统弹出修改页面       |
|    RefundStrategy.remove    |      管理员/经理点击删除退票策略，系统弹出删除页面       |
|    RefundStrategy.input     | 系统允许管理员/经理在新增/修改退票策略任务中进行键盘输入 |
|  RefundStrategy.input.Del   |            系统允许管理员/经理删除输入的信息             |
| RefundStrategy.input.Cancel |             系统允许管理员/经理取消输入命令              |



####  3.2.8 影厅信息管理

##### 3.2.8.1 特性描述

已经被识别以及授权的影院管理员对影厅进行 新增/修改 ，完成影厅的 新增/修改。
- 优先级=高

##### 3.2.8.2 刺激/响应序列

- 刺激：影院管理员选择 新增/修改 影厅

- 响应：系统显示对应影厅的各个信息输入窗口

- 刺激：影院管理员填写影厅信息并且提交

- 响应：系统修改影厅并且显示 新增/修改 影厅成功信息

##### 3.2.8.3 相关功能需求

|                             |                                                          |
| :-------------------------: | :------------------------------------------------------: |
|     HallManage.show     |      管理员/经理点击影厅，系统显示影厅列表       |
|     HallManage.add      |      管理员/经理点击增加影厅，系统弹出新增页面       |
|    HallManage.change    |      管理员/经理点击修改影厅信息，系统弹出修改页面       |
|    HallManage.input     | 系统允许管理员/经理在新增/修改影厅信息任务中进行键盘输入 |
|  HallManage.input.Del   |            系统允许管理员/经理删除输入的信息             |
| HallManage.input.Cancel |             系统允许管理员/经理取消输入命令              |

####  3.2.9 用户管理

##### 3.2.9.1 特性描述

已经被识别以及授权的影院管理员对用户进行 新增/修改/删除 ，完成用户的 新增/修改/删除。
- 优先级=高

##### 3.2.9.2 刺激/响应序列

- 刺激：影院管理员选择 新增/修改/删除 用户

- 响应：系统显示对应用户的各个信息输入窗口

- 刺激：影院管理员填写用户信息并且提交

- 响应：系统修改用户信息并且显示 新增/修改/删除 用户成功信息

##### 3.2.9.3 相关功能需求

|                             |                                                          |
| :-------------------------: | :------------------------------------------------------: |
|     UserManage.show     |      管理员/经理点击用户，系统显示用户列表       |
|     UserManage.add      |      管理员/经理点击增加用户，系统弹出新增页面       |
|    UserManage.change    |      管理员/经理点击修改用户信息，系统弹出修改页面       |
|    UserManage.input     | 系统允许管理员/经理在新增/修改/用户信息任务中进行键盘输入 |
|  UserManage.input.Del   |            系统允许管理员/经理删除输入的信息             |
| UserManage.input.Cancel |             系统允许管理员/经理取消输入命令              |
|   HallManage.remove    |      管理员/经理点击删除用户，系统弹出删除页面    |


####  3.2.10 查看历史订单

##### 3.2.10.1 特性描述

- 经过验证以及授权的用户查看自身订单记录。
- 优先级=高

##### 3.2.10.2 刺激/响应序列

- 刺激：用户查看历史订单
- 响应：系统显示用户的历史订单记录

##### 3.2.10.3 相关功能需求

|            |                                            |
| :--------: | :----------------------------------------: |
| Order.show | 用户点击历史订单记录，系统显示历史订单记录 |



####  3.2.11 查看历史消费记录

##### 3.2.11.1 特性描述

- 经过验证以及授权的用户查看自身历史消费记录。
- 优先级=高

##### 3.2.11.2 刺激/响应序列

- 刺激：用户选择查看历史消费记录
- 响应：系统显示对应用户的历史消费记录

##### 3.2.11.3 相关功能需求

|                         |                                        |
| :---------------------: | :------------------------------------: |
|   Order.Consume.show    | 用户点击历史消费，系统显示历史消费记录 |
| Order.Consume.Calculate |       系统显示用户的历史消费金额       |



####  3.2.12 查看会员卡充值记录

##### 3.2.12.1 特性描述

- 普通用户查看会员卡充值记录
- 优先级=高

##### 3.2.12.2 刺激/响应序列

- 刺激：观众点击会员卡充值记录
- 响应：系统显示会员卡充值记录

##### 3.2.12.3 相关功能需求

|                   |                                                    |
| ----------------- | -------------------------------------------------- |
| useVIPCharge.show | 普通用户点击会员卡充值记录，系统显示会员卡充值记录 |

####  3.2.13 赠送优惠券

##### 3.2.13.1 特性描述

- 管理员/经理赠送优惠券给指定会员
- 优先级=高

##### 3.2.13.2 刺激/响应序列

- 刺激：管理员/经理输入目标会员的已消费金额
- 响应：系统查询会员名单，并显示选中会员人数
- 刺激：管理员/经理选择优惠券
- 响应：系统显示选中的优惠券
- 刺激：管理员/经理点击完成
- 响应：系统更新会员持有优惠券的列表

##### 3.2.13.3 相关功能需求

|                      |                                                       |
| -------------------- | ----------------------------------------------------- |
| vipGift.search       | 管理员/经理输入会员已消费金额，系统显示选中会员人数   |
| vipGift.select       | 管理员/经理选择优惠券                                 |
| vipGift.give         | 管理员/经理点击赠送优惠券，系统弹出选择优惠券界面页面 |
| vipGift.input        | 系统允许管理员/经理在赠送优惠券任务中进行键盘输入     |
| vipGift.input.Del    | 系统允许管理员/经理删除输入的信息                     |
| vipGift.input.Cancle | 系统允许管理员/经理取消输入命令                       |



####  3.2.14 用户退票

##### 3.2.14.1 特性描述

- 经过验证以及授权的用户对已经购买的电影票进行退票，完成退票以及修改订单记录和座位状态并且返还对应金额。

- 优先级=高

##### 3.2.14.2 刺激/响应序列

- 刺激：用户选择退票

- 响应：系统显示订单记录中距离购票时间符合各自的退票策略的订单记录供用户选择

- 刺激：用户选择订单记录

- 响应：系统进行退票，修改订单记录，修改座位状态，返还对应金额并且显示退票成功信息

##### 3.2.14.3 相关功能需求

|              |                                                |
| :----------: | :--------------------------------------------: |
|  Order.show  |   用户点击历史订单记录，系统显示历史订单记录   |
| Order.Refund | 用户点击符合退票策略的订单的退票，系统进行退票 |




### 3.3 非功能需求

#### 3.3.1  安全性

Safety1:用户必须在登录的情况下才能使用该系统。

Safety2:用户可以通过注册为观众、登录获得观众具有的权限。

Safety3:用户可以通过获得的影院员工，影院经理，管理员账号登陆进入影院管理界面

Safety4:系统保留一个默认系统管理员账户

#### 3.3.2  可维护性
Modifiability1：当系统的电影标识发生改变，系统要能够在3人1天内完成。
#### 3.3.3  易用性
Usability1：使用系统1个月的影院管理员进行电影上架处理的效率要达到10部/分钟
#### 3.3.4  可靠性
Reliability1：在客户端与服务器通信时，如果网络故障，系统不能出现故障。
#### 3.3.5  业务规则
* BR1：电影来源必须合法
* BR2：只有合法公民才能获得授权
#### 3.3.6  约束
* IC1：系统要在网络上分布为一个服务器和多个客户端。
### 3.4  数据需求
#### 3.4.1  数据定义
* DR1：系统需要存储电影信息和用户信息。
* DR2：系统需要存储一年内的电影上下架记录。
* DR3：系统删除之后电影信息和用户信息仍要继续存储3个月时间，以保证历史信息显示的正确性。
* DR4：系统需要存储用户的历史消费记录
* DR5：系统需要存储订单记录
* DR6：系统需要存储退票策略信息
#### 3.4.2  默认数据
默认数据适用于以下两种情况：
* 用户没有注册
* 编辑数据时不小心将相关数据删除

* Default1：用户默认身份为访客
* Default2：时间默认为当天

#### 3.4.3  数据格式要求
* Format1：日期格式为yyyy-mm-dd。
* Format2：id（包括观众ID，电影ID，管理员ID）的格式必须是正整数。

### 3.5  其他
安装需求

* Install1: 在安装系统时，要初始化用户、电影库存等重要数据。